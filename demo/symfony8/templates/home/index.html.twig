{% extends 'base.html.twig' %}

{% block title %}Home - PdfSignable Demo{% endblock %}

{% block body %}
<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title">PdfSignable Bundle Demo (Symfony 8)</h5>
        <p class="card-text">Demos are split into <strong>Define signature areas</strong> (where boxes go, validation, layout) and <strong>Signing</strong> (draw/upload signature in box, legal disclaimer). Each illustrates a way to configure <code>SignatureCoordinatesType</code>.</p>
    </div>
</div>
<div class="row g-3">
    <div class="col-12"><h5 class="border-bottom pb-2">Define signature areas</h5></div>
    <div class="col-12"><h6 class="text-muted">Named configs usage (nowo_pdf_signable.configs)</h6></div>
    <div class="col-md-6 col-lg-3">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">No config</h6>
                <ul class="card-text small mb-0">
                    <li>No <code>config</code> passed to the type</li>
                    <li>Units, origin and example URL from form baseOptions + bundle <code>example_pdf_url</code></li>
                    <li>Nothing from <code>configs</code></li>
                </ul>
                <a href="{{ path('app_signature') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-3">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Config <code>default</code></h6>
                <ul class="card-text small mb-0">
                    <li><code>config: 'default'</code></li>
                    <li><code>units</code>, <code>unit_default</code>, <code>origin_default</code> from <code>configs.default</code></li>
                    <li>Options in code override the config</li>
                </ul>
                <a href="{{ path('app_signature_default_config') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-3">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Config <code>fixed_url</code></h6>
                <ul class="card-text small mb-0">
                    <li><code>config: 'fixed_url'</code></li>
                    <li><code>url_field: false</code>, <code>show_load_pdf_button: false</code> — URL hidden, no Load PDF button</li>
                    <li><code>unit_field: false</code>, <code>origin_field: false</code> — unit and origin hidden (fixed to default)</li>
                    <li>Single document (template/contract); only boxes form visible</li>
                </ul>
                <a href="{{ path('app_signature_fixed_url') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-3">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Config overridden</h6>
                <ul class="card-text small mb-0">
                    <li>Same <code>fixed_url</code> config</li>
                    <li>Override in code: <code>unit_default: 'pt'</code></li>
                    <li>Shows form options override named config</li>
                </ul>
                <a href="{{ path('app_signature_fixed_url_overridden') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-12 mt-2"><h6 class="text-muted">URL options (inline)</h6></div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">URL as dropdown</h6>
                <ul class="card-text small mb-0">
                    <li><code>url_mode: choice</code>, <code>url_choices</code> (label → URL)</li>
                    <li>User picks document by label; <code>url_placeholder</code> for dropdown</li>
                    <li>Fixed set of PDFs (templates/models)</li>
                </ul>
                <a href="{{ path('app_signature_url_choice') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-12 mt-2"><h6 class="text-muted">Box / validation options</h6></div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Limited boxes + name selector</h6>
                <ul class="card-text small mb-0">
                    <li><code>min_entries: 1</code>, <code>max_entries: 4</code></li>
                    <li><code>unique_box_names: true</code> — no duplicate names</li>
                    <li><code>name_mode: choice</code>, <code>name_choices</code> (Signer 1, 2, Witness)</li>
                </ul>
                <a href="{{ path('app_signature_limited_boxes') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Same signer, multiple locations</h6>
                <ul class="card-text small mb-0">
                    <li><code>unique_box_names: false</code> — duplicate names allowed</li>
                    <li>Same name on several boxes = same signer, multiple positions</li>
                    <li>Overlay disambiguates (e.g. <code>signer_1 (1)</code>, <code>signer_1 (2)</code>)</li>
                </ul>
                <a href="{{ path('app_signature_same_signer_multiple') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Unique per name (array)</h6>
                <ul class="card-text small mb-0">
                    <li><code>unique_box_names: ['signer_1', 'witness']</code> — only these unique</li>
                    <li><code>signer_2</code> may appear on multiple boxes</li>
                    <li>One Signer 1 and one Witness; Signer 2 can sign in several places</li>
                </ul>
                <a href="{{ path('app_signature_unique_per_name') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-12 mt-2"><h6 class="text-muted">Page &amp; box options</h6></div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Page restriction</h6>
                <ul class="card-text small mb-0">
                    <li><code>allowed_pages: [1]</code> — page field is a dropdown (e.g. page 1 only)</li>
                    <li>Use case: single-page contract; restrict boxes to first page</li>
                </ul>
                <a href="{{ path('app_signature_page_restriction') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Sorted boxes</h6>
                <ul class="card-text small mb-0">
                    <li><code>sort_boxes: true</code> — on submit, boxes sorted by page, then Y, then X</li>
                    <li>Deterministic order for export/downstream signing</li>
                </ul>
                <a href="{{ path('app_signature_sorted_boxes') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">No overlapping boxes</h6>
                <ul class="card-text small mb-0">
                    <li><code>prevent_box_overlap: true</code> (default) — boxes on the same page cannot overlap</li>
                    <li>Frontend: drag/resize that would overlap is reverted and a message is shown</li>
                    <li>Validation error on submit if two boxes intersect</li>
                </ul>
                <a href="{{ path('app_signature_no_overlap') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Allow overlapping boxes</h6>
                <ul class="card-text small mb-0">
                    <li><code>prevent_box_overlap: false</code> — overlap allowed on the same page</li>
                    <li>No frontend revert; no validation error</li>
                    <li>Use case: testing or intentional overlapping layout</li>
                </ul>
                <a href="{{ path('app_signature_allow_overlap') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Rotation (angle + rotate handle)</h6>
                <ul class="card-text small mb-0">
                    <li><code>enable_rotation: true</code> — angle field per box</li>
                    <li>Viewer shows rotate handle above each overlay; drag to rotate</li>
                </ul>
                <a href="{{ path('app_signature_rotation') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Default values per box name</h6>
                <ul class="card-text small mb-0">
                    <li><code>box_defaults_by_name</code> — width, height, x, y, angle per name</li>
                    <li>Selecting a name in the form fills those fields automatically</li>
                </ul>
                <a href="{{ path('app_signature_defaults_by_name') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Snap to grid + snap to boxes</h6>
                <ul class="card-text small mb-0">
                    <li>Two boxes pre-placed; drag one near the other to see edges snap</li>
                    <li><code>snap_to_grid: 10</code> (10 mm) — move any box to see it jump to the grid</li>
                    <li>Fixed PDF loads automatically</li>
                </ul>
                <a href="{{ path('app_signature_snap_to_grid') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Guides and grid</h6>
                <ul class="card-text small mb-0">
                    <li><code>show_grid: true</code>, <code>grid_step</code> — grid overlay on each page (in form unit)</li>
                    <li>Helps align boxes; grid is visual only, does not affect coordinates</li>
                </ul>
                <a href="{{ path('app_signature_guides_and_grid') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Viewer lazy load</h6>
                <ul class="card-text small mb-0">
                    <li><code>viewer_lazy_load: true</code> — PDF.js and signable script load when widget enters viewport</li>
                    <li>Uses IntersectionObserver; useful for long pages with several widgets</li>
                </ul>
                <a href="{{ path('app_signature_lazy_load') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-12 mt-2"><h6 class="text-muted">Latest features (combined)</h6></div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100 border-primary">
            <div class="card-body">
                <h6 class="card-title">Page restriction + sort + no overlap + snap</h6>
                <ul class="card-text small mb-0">
                    <li><code>allowed_pages: [1]</code>, <code>sort_boxes: true</code>, <code>prevent_box_overlap: true</code></li>
                    <li><code>snap_to_grid: 5</code>, <code>snap_to_boxes: true</code> — snap while dragging</li>
                </ul>
                <a href="{{ path('app_signature_latest_features') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-12 mt-2"><h6 class="text-muted">Model prefill</h6></div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Predefined boxes</h6>
                <ul class="card-text small mb-0">
                    <li>Model pre-filled on GET: fixed URL, two boxes (<code>signer_1</code>, <code>signer_2</code>)</li>
                    <li><code>url_field: false</code>, <code>max_entries: 5</code></li>
                    <li>Edit positions and optionally add more boxes</li>
                </ul>
                <a href="{{ path('app_signature_predefined') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-12 mt-4"><h5 class="border-bottom pb-2">Signing (draw / image / legal)</h5></div>
    <div class="col-12"><h6 class="text-muted">Capture signature in box and legal disclaimer</h6></div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100 border-success">
            <div class="card-body">
                <h6 class="card-title">Draw signature in box</h6>
                <ul class="card-text small mb-0">
                    <li><code>enable_signature_capture: true</code> — draw pad (canvas) per box</li>
                    <li>Draw with mouse or finger; image shown in overlay</li>
                    <li>Low legal validity (acceptance/consent)</li>
                </ul>
                <a href="{{ path('app_signing_draw') }}" class="btn btn-sm btn-success mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Draw or upload signature image</h6>
                <ul class="card-text small mb-0">
                    <li>Draw pad + file upload per box</li>
                    <li>Same storage; image in overlay</li>
                </ul>
                <a href="{{ path('app_signing_upload') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h6 class="card-title">Legal disclaimer</h6>
                <ul class="card-text small mb-0">
                    <li><code>signing_legal_disclaimer</code> + optional URL</li>
                    <li>Inform users about legal effect of signing method</li>
                </ul>
                <a href="{{ path('app_signing_legal_disclaimer') }}" class="btn btn-sm btn-primary mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100 border-success">
            <div class="card-body">
                <h6 class="card-title">Predefined boxes — sign only</h6>
                <ul class="card-text small mb-0">
                    <li>Boxes already placed (2 signers)</li>
                    <li><code>min_entries = max_entries = 2</code> — cannot add or remove boxes</li>
                    <li>Only draw or upload signature in each box</li>
                </ul>
                <a href="{{ path('app_signing_predefined_boxes') }}" class="btn btn-sm btn-success mt-2">Open</a>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="card h-100 border-info">
            <div class="card-body">
                <h6 class="card-title">Signing options (AutoFirma, legal)</h6>
                <ul class="card-text small mb-0">
                    <li>Legal validity: simple vs qualified signature</li>
                    <li>Links to AutoFirma and roadmap (eIDAS, PKI)</li>
                    <li>Legal disclaimer and signing demos</li>
                </ul>
                <a href="{{ path('app_signing_options') }}" class="btn btn-sm btn-info mt-2">Open</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
