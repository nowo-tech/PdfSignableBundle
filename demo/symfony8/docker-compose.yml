# FrankenPHP (Caddy + PHP) â€” serves Symfony 8 demo over HTTPS on localhost
services:
  php:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: pdf-signable-symfony8
    working_dir: /app
    volumes:
      - .:/app
      # Bundle root for pnpm build and optional vendor symlink
      - ../..:/var/pdf-signable-bundle
      - composer-cache:/root/.composer/cache
    environment:
      - COMPOSER_ALLOW_SUPERUSER=1
      - XDEBUG_MODE=debug
      - XDEBUG_CONFIG=client_host=host.docker.internal client_port=9003
    extra_hosts:
      - "host.docker.internal:host-gateway"
    ports:
      - "${PORT:-8002}:443"
    networks:
      - pdf-signable-demo-network

volumes:
  composer-cache:
    driver: local

networks:
  pdf-signable-demo-network:
    driver: bridge
